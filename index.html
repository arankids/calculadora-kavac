
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kavac Studio</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" />
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
    .hidden { display: none; }
    .inputs-row { display: flex; justify-content: center; gap: 10px; margin: 10px 0; }
    input, select, button { padding: 10px; font-size: 16px; }
    button { background-color: #00b7c2; color: white; border: none; border-radius: 5px; cursor: pointer; }
    .resultado { margin-top: 20px; padding: 10px; background: #f0f0f0; border-radius: 5px; }
  </style>
</head>
<body>
  <img src="logo.png" alt="Kavac Studio" style="width: 100px;" />
  <h1 style="color: #00b7c2;">Kavac Studio</h1>
  <p>Calculadora para impresi√≥n Foam y DTF</p>

  <div>
    <label for="tipo"><strong>¬øQu√© deseas calcular?</strong></label>
    <select id="tipo">
      <option value="foam">Imagen de Foam</option>
      <option value="dtf">Imagen DTF</option>
    </select>
  </div>

  <!-- Foam Form -->
  <div id="foamForm">
    <div class="inputs-row" id="foamInputsContainer">
      <input type="number" placeholder="Alto (cm)" min="1" />
      <input type="number" placeholder="Ancho (cm)" min="1" />
      <input type="number" placeholder="Cantidad" min="1" />
    </div>
    <button onclick="agregarFigura()">Agregar figura</button>
    <button onclick="calcularFoam()">Calcular Foam</button>
    <div id="resultadoFoam" class="resultado"></div>
  </div>

  <!-- DTF Form -->
  <div id="dtfForm" class="hidden">
    <div class="inputs-row">
      <input type="number" id="cantidadDtf" placeholder="Cantidad" min="1" />
      <input type="number" id="altoDtf" placeholder="Alto (cm)" min="1" />
      <input type="number" id="anchoDtf" placeholder="Ancho (cm)" min="1" />
    </div>
    <select id="anchoLienzoDtf">
      <option value="29">Lienzo 29 cm</option>
      <option value="58">Lienzo 58 cm</option>
    </select>
    <button onclick="calcularDTF()">Calcular DTF</button>
    <div id="resultadoDtf" class="resultado"></div>
  </div>

  <script>
    const foamForm = document.getElementById('foamForm');
    const dtfForm = document.getElementById('dtfForm');
    const foamInputsContainer = document.getElementById('foamInputsContainer');
    const tipoSelect = document.getElementById('tipo');
    const foamFigures = [];

    tipoSelect.addEventListener('change', function () {
      foamForm.classList.add('hidden');
      dtfForm.classList.add('hidden');
      if (this.value === 'foam') foamForm.classList.remove('hidden');
      if (this.value === 'dtf') dtfForm.classList.remove('hidden');
    });

    function agregarFigura() {
      const inputs = foamInputsContainer.querySelectorAll('input');
      const alto = parseFloat(inputs[0].value);
      const ancho = parseFloat(inputs[1].value);
      const cantidad = parseInt(inputs[2].value);
      if (!alto || !ancho || !cantidad) return alert('Completa todos los campos.');
      foamFigures.push({ alto, ancho, cantidad });
      inputs.forEach(input => input.value = '');
      alert('Figura agregada.');
    }

    function calcularFoam() {
      if (foamFigures.length === 0) return alert('Agrega al menos una figura.');
      const impresion = 11500;
      const ganancia = 0.6;
      let areaTotal = 0;
      foamFigures.forEach(f => {
        const area = (f.alto / 100) * (f.ancho / 100) * f.cantidad;
        areaTotal += area;
      });
      const costoBase = areaTotal * impresion;
      const gananciaTotal = costoBase * ganancia;
      const precioFinal = costoBase + gananciaTotal;
      document.getElementById('resultadoFoam').innerHTML = `
        <strong>Total: $${precioFinal.toFixed(0).toLocaleString('es-CL')}</strong><br>
        √Årea total: ${areaTotal.toFixed(2)} m¬≤<br>
        Costo base: $${costoBase.toFixed(0).toLocaleString('es-CL')}<br>
        Ganancia: $${gananciaTotal.toFixed(0).toLocaleString('es-CL')}
      `;
      foamFigures.length = 0;
    }

    function calcularDTF() {
      const cantidad = parseInt(document.getElementById('cantidadDtf').value);
      const alto = parseFloat(document.getElementById('altoDtf').value) / 100;
      const ancho = parseFloat(document.getElementById('anchoDtf').value) / 100;
      const anchoLienzo = parseInt(document.getElementById('anchoLienzoDtf').value);
      const resultadoDiv = document.getElementById('resultadoDtf');
      if (!cantidad || !alto || !ancho) {
        resultadoDiv.innerHTML = "Por favor completa todos los campos.";
        return;
      }
      const areaTotal = alto * ancho * cantidad;
      const largoNecesario = Math.ceil((ancho * cantidad) / (anchoLienzo / 100));
      const precioPorMetro = anchoLienzo === 29 ? 9990 : 18990;
      const precioFinal = (largoNecesario * precioPorMetro) / 100;
      resultadoDiv.innerHTML = `
        <strong>Resultado:</strong><br>
        üîπ √Årea total: ${areaTotal.toFixed(2)} m¬≤<br>
        üîπ Largo necesario: ${largoNecesario} cm<br>
        üî∏ Precio final: $${Math.round(precioFinal).toLocaleString('es-CL')}
      `;
    }
  </script>
</body>
</html>
