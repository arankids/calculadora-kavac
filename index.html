<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kavac Studio</title>
  <link rel="manifest" href="manifest.json" />
  <style>
    body {
      font-family: sans-serif;
      background: #fefefe;
      text-align: center;
      color: #333;
    }
    .container {
      max-width: 600px;
      margin: auto;
      padding: 1rem;
    }
    h1 {
      color: #00b8b8;
    }
    select, input, button {
      padding: 0.5rem;
      margin: 0.5rem;
      font-size: 1rem;
    }
    button {
      background-color: #00b8b8;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }
    button:hover {
      background-color: #009090;
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="logo.png" alt="Kavac Studio" width="80">
    <h1>Kavac Studio</h1>
    <p>Calculadora para impresión Foam y DTF</p>

    <label><strong>¿Qué deseas calcular?</strong></label>
    <select id="tipoCalculo" onchange="cambiarFormulario()">
      <option value="foam">Imagen de Foam</option>
      <option value="dtf">Impresión DTF</option>
    </select>

    <div id="formulario"></div>
    <div id="resultado"></div>
  </div>

  <script>
    const foamPrecioImpresion = 11500; // por m²
    const foamGanancia = 0.6;
    const foamPrecioPliego = 12000; // por pliego 2.4 x 1.2m

    const dtfPrecio29 = 9990;  // por metro lineal
    const dtfPrecio58 = 18990; // por metro lineal

    function cambiarFormulario() {
      const tipo = document.getElementById('tipoCalculo').value;
      const form = document.getElementById('formulario');
      const resultado = document.getElementById('resultado');
      resultado.innerHTML = '';
      if (tipo === 'foam') {
        form.innerHTML = `
          <input type="number" id="alto" placeholder="Alto (cm)" />
          <input type="number" id="ancho" placeholder="Ancho (cm)" />
          <input type="number" id="cantidad" placeholder="Cantidad" />
          <button onclick="calcularFoam()">Calcular Foam</button>
        `;
      } else {
        form.innerHTML = `
          <input type="number" id="anchoImg" placeholder="Ancho (cm)" />
          <input type="number" id="altoImg" placeholder="Alto (cm)" />
          <input type="number" id="cantidadImg" placeholder="Cantidad" />
          <select id="anchoLienzo">
            <option value="29">Ancho lienzo: 29 cm</option>
            <option value="58">Ancho lienzo: 58 cm</option>
          </select>
          <button onclick="calcularDTF()">Calcular DTF</button>
        `;
      }
    }

    function calcularFoam() {
      const alto = parseFloat(document.getElementById('alto').value) / 100;
      const ancho = parseFloat(document.getElementById('ancho').value) / 100;
      const cantidad = parseInt(document.getElementById('cantidad').value);
      const areaTotal = alto * ancho * cantidad;
      const costoBase = areaTotal * foamPrecioImpresion;
      const ganancia = costoBase * foamGanancia;
      const precioFinal = costoBase + ganancia;
      document.getElementById('resultado').innerHTML = `
        <h3>Total estimado: $${precioFinal.toFixed(0)}</h3>
        <p>Área: ${areaTotal.toFixed(2)} m²</p>
        <p>Costo base: $${costoBase.toFixed(0)}</p>
        <p>Ganancia (60%): $${ganancia.toFixed(0)}</p>
      `;
    }

    function calcularDTF() {
      const anchoImg = parseFloat(document.getElementById('anchoImg').value);
      const altoImg = parseFloat(document.getElementById('altoImg').value);
      const cantidad = parseInt(document.getElementById('cantidadImg').value);
      const anchoLienzo = parseInt(document.getElementById('anchoLienzo').value);

      const imagenesPorFila = Math.floor(anchoLienzo / anchoImg);
      const filasNecesarias = Math.ceil(cantidad / imagenesPorFila);
      const largoNecesario = filasNecesarias * altoImg;

      const precioPorMetro = anchoLienzo === 29 ? dtfPrecio29 : dtfPrecio58;
      const largoEnMetros = largoNecesario / 100;
      const precioFinal = largoEnMetros * precioPorMetro;

      document.getElementById('resultado').innerHTML = `
        <h3>Total estimado: $${precioFinal.toFixed(0)}</h3>
        <p>Alto total requerido: ${largoNecesario.toFixed(1)} cm</p>
        <p>Imágenes por fila: ${imagenesPorFila}</p>
      `;
    }

    cambiarFormulario(); // inicial
  </script>
</body>
</html>
